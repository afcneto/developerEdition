<template>
    
        <lightning-card title="Lista de Produtos" icon-name="standard:product_service_campaign">
            <div class="slds-box" style="overflow: auto; height:430px;">
                <template if:true={produtosList}>
                    <!--div class="slds-box">
                        <lightning-datatable 
                            data={produtosList.data} 
                            columns={colunas} 
                            key-field="id"
                            onrowaction={handleRowAction}
                            hide-checkbox-column>
                        </lightning-datatable>
                    </div-->
                    <lightning-layout multiple-rows>
                        <template for:each={produtosList.data} for:item="produto">
                            <lightning-layout-item size="12" small-device-size="6" medium-device-size="4" large-device-size="4" padding="around-small" key={produto.id}>
                                <div class="custom-box slds-box slds-p-around_small slds-text-align_left " style="height:310px;">
                                    <div class="slds-text-align_left">
                                        <b>{produto.nome}</b>
                                    </div> 
                                    <div>
                                        
                                    </div>                           
                                    <div class="custom-intern-box slds-box slds-p-around_small slds-text-align_left" style="overflow: auto; height:220px;">
                                        <p>{produto.descricao}</p>
                                    </div>
                                    <div class="slds-p-around_xx-small slds-text-align_right">
                                        <lightning-button-icon 
                                            icon-name="utility:preview" variant="border-filled" size="medium" alternative-text="Ver detalhes" class="slds-m-left_xx-small" 
                                            onclick={handleClickView} 
                                            data-id={produto.id} data-nome={produto.nome} data-descricao={produto.descricao} data-preco={produto.preco} data-imagem={produto.imagem} data-qtde={produto.qtde}>
                                        </lightning-button-icon>
                                        <lightning-button-icon icon-name="utility:cart" variant="border-filled" size="medium" alternative-text="Adicionar ao carrinho" class="slds-m-left_xx-small"
                                            onclick={handleClickAddToCart} 
                                            data-id={produto.id} data-nome={produto.nome} data-descricao={produto.descricao} data-preco={produto.preco} data-imagem={produto.imagem} data-qtde={produto.qtde}>
                                        </lightning-button-icon>
                                    </div>                            
                                </div>
                            </lightning-layout-item>
                        </template>                
                    </lightning-layout>
                </template>
            </div>
        </lightning-card>
    
    
    <template if:true={showModal}>
        <section role="dialog" aria-modal="true" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 class="slds-text-heading_medium">Detalhes do produto: {record.nome}</h2>
                    <button class="slds-button slds-button_icon slds-modal__close" title="Close" onclick={closeModal}>
                        <lightning-icon icon-name="utility:close" size="small"></lightning-icon>
                    </button>
                    <lightning-card>
                        <h3>{record.descricao}</h3>
                        <lightning-badge label={precoProduto}></lightning-badge>
                        <lightning-badge label={qtdProduto}></lightning-badge>
                        <div>
                            <img src={record.imagem}/>
                        </div>
                    </lightning-card>  
                    <lightning-button variant="brand" label="Adicionar ao carrinho" title="Adicionar ao carrinho" icon-name="utility:cart" class="slds-m-left_small" onclick={modalAddToCart}></lightning-button>
                </header>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>